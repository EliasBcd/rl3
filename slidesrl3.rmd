---
title: "Une introduction à R"
subtitle: "L3 économie-finance"
author: "Élias Bouacida ; Antoine Terracol"
institute: "Université Paris 8"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: ["default","style_perso.css"]
    self_contained: true
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false

---


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(fig.retina = 3, warning = FALSE, message = FALSE)
```


class: left, middle
name: Installation

# Installation

Le seul prérequis pour suivre ce cours est d'avoir installé R et RStudio sur votre ordinateur.

Il s'agit de deux logiciels libres, gratuits, téléchargeables en ligne et fonctionnant sous Windows, Mac et Linux.

Pour installer R, il suffit de se rendre sur une des pages suivantes :

[Installer R sous Windows](https://cloud.r-project.org/bin/windows/base/)

[Installer R sous Mac](https://cloud.r-project.org/bin/macosx/)

Pour installer RStudio, rendez-vous sur [la page de téléchargement du logiciel](https://www.rstudio.com/products/rstudio/download/#download) et installez la version adaptée à votre système.

Vous trouverez plus d'informations sur l'installation de R et Rstudio sur le page Moodle du cours.
---
class: left, middle

# Prise en main

## La console

Au premier lancement de RStudio, l'interface est organisée en trois grandes zones.

```{r, out.width = "600px",echo=FALSE}
knitr::include_graphics("fenetreRStudio.png")
```



La zone de gauche se nomme la Console. À son démarrage, RStudio a lancé une nouvelle session de R et c'est dans cette fenêtre que nous allons pouvoir interagir avec lui.
---
La Console affiche un texte de bienvenue suivi d'une ligne commençant par le caractère `>` (l'invite de commande). 


Nous pouvons tout de suite essayer quelques calculs :

```{r}
2+2
```
--

```{r}
5-7
4*12
-10/3
5^2
```

---
## Calculs de base




#### Addition, Sousraction, Multiplication et Division

| Math          | code `R`    | Résultat    |
|:-------------:|:-------:|:---------:|
| $3 + 2$       | `3 + 2` | `r 3 + 2` |
| $3 - 2$       | `3 - 2` | `r 3 - 2` |
| $3 \times 2$    | `3 * 2` | `r 3 * 2` |
| $3 \div 2$       | `3 / 2` | `r 3 / 2` |

#### Exposants

| Math          | code `R`    | Résultat    |
|:-------------:|:-------:|:---------:|
| $3^2$        | `3 ^ 2`         | `r 3 ^ 2`         |
| $2^{(-3)}$   | `2 ^ (-3)`      | `r 2 ^ (-3)`      |
| $100^{1/2}$  | `100 ^ (1 / 2)` | `r 100 ^ (1 / 2)` |
| $\sqrt{100}$ | `sqrt(100)`     | `r sqrt(100)`     |

---

#### Constantes mathématiques 

| Math          | code `R`    | Résultat    |
|:------------:|:---------------:|:-----------------:|
| $\pi$        | `pi`            | `3.141593`            |
| $e$          | `exp(1)`        | `2.718282`        |

#### Logarithmes

Il n'y a pas de `ln()` dans `R`, mais on utilise `log()` pour désigner le logarithme naturel. `log10()` désigne le logarithme en base 10

| Math          | code `R`    | Résultat    |
|:------------:|:---------------:|:-----------------:|
| $\ln(e)$         | `log(exp(1))`       | `1`       |
| $\log_{10}(1000)$ | `log10(1000)`       | `3`       |

#### Trigonometrie

| Math          | code `R`    | Résultat    |
|:------------:|:---------------:|:-----------------:|
| $\sin(\pi / 2)$ | `sin(pi / 2)` | `1` |
| $\cos(0)$       | `cos(0)`      | `1`      |


---

## Objets 

Pour conserver le résultat d'une opération, on peut le stocker dans un objet à l'aide de l'opérateur d'assignation `<-`. Cette “flèche” stocke ce qu'il y a à sa droite dans un objet dont le nom est indiqué à sa gauche.

```{r}
x <- 2
```
Se lit “prend la valeur 2 et mets la dans un objet qui s'appelle `x`”.

--
Si on exécute une commande comportant juste le nom d'un objet, `R` affiche son contenu

```{r}
x
```
--

On peut évidemment réutiliser cet objet dans d'autres opérations : `R` le remplacera alors par sa valeur.
```{r}
x+4
```

---
On peut créer autant d'objets qu'on le souhaite.

```{r}
x <- 2
y <- 5
resultat <- x + y
resultat
```
--

Si on assigne une nouvelle valeur à un objet, la valeur précédente est perdue.

```{r}
x <- 2
x <- 5
x
```
--
Assigner un objet à un autre  copie juste la valeur de l'objet de droite dans celui de gauche

```{r}
x <- 1
y <- 3
x <- y
x
```

---

Les objets peuvent contenir tout un tas d'informations.

Jusqu'ici on n'a stocké que des nombres, mais ils peuvent aussi contenir des chaînes de caractères (du texte), qu'on délimite avec des guillemets simples ou doubles (' ou ") :

```{r}
chien <- "Chihuahua"
chien
```

--

Ou encore des conditions logiques (`TRUE` ou `FALSE`)

```{r}
valeur <- TRUE
valeur

chien == "Doberman"
```

---

## Vecteurs

Imaginons qu'on a demandé la taille en centimètres de 5 personnes et qu'on souhaite calculer leur taille moyenne.

On pourrait créer autant d'objets que de tailles et calculer la moyenne

```{r}
taille1 <- 156
taille2 <- 164
taille3 <- 197
taille4 <- 147
taille5 <- 173
(taille1 + taille2 + taille3 + taille4 + taille5) / 5
```

--
Ce n’est clairement pas pratique du tout. On va plutôt stocker l'ensemble de nos tailles dans un seul objet, un vecteur, avec la syntaxe suivante :

```{r}
tailles <- c(156, 164, 197, 147, 173)
```

où le `c()` veut dire "combine les valeurs suivantes dans un vecteur ou une liste"

---
Si on affiche le contenu de cet objet, on voit qu’il contient bien l’ensemble des tailles saisies.

```{r}
tailles
```

--
Si on applique une opération à un vecteur, celle-ci s'applique à toutes les valeurs qu'il contient. 

Si on veut la taille en mètres plutôt qu'en centimètres, on peut faire :
```{r}
tailles_m <- tailles/100
tailles_m
```

---
Imaginons maintenant qu’on a aussi demandé aux cinq mêmes personnes leur poids en kilos.

On peut créer un deuxième vecteur :

```{r}
poids <- c(45, 59, 110, 44, 88)
```

On peut alors effectuer des calculs utilisant nos deux vecteurs `tailles` et `poids`.

On peut par exemple calculer l’indice de masse corporelle (IMC) de chacun de nos enquêtés en divisant leur poids en kilo par leur taille en mètre au carré :
```{r}
imc <- poids / (tailles / 100) ^ 2
imc
```

---

Un vecteur peut contenir des nombres, mais il peut aussi contenir du texte.

Imaginons qu'on a demandé aux 5 mêmes personnes leur type de chien préféré : on peut regrouper l'information dans un vecteur.

```{r}
chiens_pref <-c("Doberman","Chihuahua","Husky","Bouvier Bernois","Labrador")
chiens_pref
```

--
Notons qu'on peut tester l'égalité des éléments d'un vecteur et d'un objet

```{r}
chiens_pref==chien
tailles==147
```

La double égalité `==` est l'opérateur de comparaison

---

L'opérateur `:` permet de générer rapidement un vecteur comprenant tous les nombres entre deux valeurs, opération assez courante sous R :

```{r}
liste <- 1:10
liste

liste2 <- 10:1
liste2
```

--

Si nous voulons créer une séquence qui ne soit pas limitée aux nombres entiers et qui augmente de 1 à la fois, nous pouvons utiliser la fonction `seq()`.
```{r}
seq(from = 1.5, to = 2.2, by = 0.1)
```

---
### Sous vecteurs

Pour extraire un sous-vecteur (subsetting), c'est-à-dire pour n'en choisir que certains éléments, nous utilisons des crochets, “`[]`”. Par exemple, `x[1]` renvoie le premier élément du vecteur `x`, et `x[3]` renvoie le troisième élément

```{r}
tailles
tailles[1]
tailles[3]
```

--

Nous pouvons également exclure certains indices, en les faisant précéder par un signe `-` .
```{r}
tailles[-2]
```

---

