---
title: "S√©ance 3 : Fonctions, conditions et boucles"
subtitle: "Apprendre R avec les LLMs"
author: "Elias Bouacida"
date: last-modified
date-format: long
format:
  html: default
  revealjs:
    scrollable: true
    slide-number: true
    output-file: slide-lecon3.html
    embed-resources: true
    footer: "S√©ance 3 - Fonctions, conditions et boucles"
lang: fr
execute:
  echo: true
---

## Plan de la s√©ance {.smaller}

::: {.incremental}
- **R√©cap et partage** (15min) : Retours sur les donn√©es
- **Conditions if/else** (45min) : Prendre des d√©cisions dans le code
- **Boucles** (45min) : R√©p√©ter des op√©rations
- **Cr√©er ses propres fonctions** (60min) : Structurer son code
- **Mini-projet** (45min) : Analyser des donn√©es avec vos fonctions
:::

::: {.fragment}
**Production attendue :** 3 fonctions personnalis√©es avec conditions et/ou boucles
:::

## Objectifs de la s√©ance

::: {.callout-tip}
## Automatiser et structurer son code
:::

::: {.incremental}
- Utiliser des **conditions** pour adapter le comportement du code
- Utiliser des **boucles** pour r√©p√©ter des op√©rations
- **Cr√©er des fonctions** r√©utilisables
- **Combiner** ces concepts pour r√©soudre des probl√®mes r√©els
:::

# R√©cap et partage {background-color="#2E8B57"}

## Retours sur vos analyses de donn√©es

::: {.incremental}
- Quelles difficult√©s avez-vous rencontr√©es ?
- Quelles fonctions int√©gr√©es avez-vous d√©couvertes ?
- Comment les LLMs vous ont-ils aid√© ?
:::

# Conditions if/else {background-color="#4169E1"}

## Pourquoi des conditions ?

::: {.callout-note}
## Question
Imaginez que vous analysez des temp√©ratures. Comment indiquer s'il fait chaud ou froid ?
:::

::: {.fragment}
On a besoin de **tester une condition** et agir diff√©remment selon le r√©sultat.
:::

## Exercice 1 : Premi√®re condition {.smaller}

Demandez √† votre LLM de vous expliquer la structure `if/else` en R avec un exemple simple.

**Ensuite, testez ce code :**

```{r}
#| eval: false
temperature <- 25

if (temperature > 20) {
  print("Il fait chaud")
}
```

**Questions √† explorer avec votre LLM :**

1. Que se passe-t-il si `temperature <- 15` ?
2. Comment ajouter un message pour "Il fait froid" ?
3. Qu'est-ce qu'un op√©rateur de comparaison ? (`>`, `<`, `==`, `!=`, `>=`, `<=`)

::: {.notes}
Laisser 10 minutes. Circuler pour v√©rifier la compr√©hension. Insister sur le fait que le LLM peut se tromper - tester le code est essentiel.
:::

## Exercice 2 : if/else complet {.smaller}

Cr√©ez un code qui :

- Prend une note (0-20)
- Affiche "R√©ussite" si la note est >= 10
- Affiche "√âchec" sinon

::: {.fragment}
**Extension :** Ajoutez une troisi√®me cat√©gorie avec `else if` :

- "Excellent" si >= 16
- "R√©ussite" si >= 10
- "√âchec" sinon
:::

::: {.notes}
10 minutes. Faire un d√©briefing collectif. Demander √† un √©tudiant de partager son code et son prompt.
:::

## Exercice 3 : Conditions et vecteurs {.smaller}

**Probl√®me :** Vous avez plusieurs notes :

```{r}
#| eval: false
notes <- c(8, 12, 15, 9, 18)
```

**Question :** Comment classifier TOUTES ces notes ?

Demandez √† votre LLM comment appliquer une condition √† un vecteur.

::: {.fragment}
**Indices √† explorer :**

- La fonction `ifelse()`
- La diff√©rence entre `if` et `ifelse()`
:::

::: {.notes}
15 minutes. C'est un concept important. Les √©tudiants d√©couvriront la vectorisation. Certains LLMs proposeront des boucles, d'autres `ifelse()`. Discuter les deux approches.
:::

# Boucles {background-color="#FF8C00"}

## Pourquoi des boucles ?

::: {.callout-note}
## Situation
Vous avez 100 temp√©ratures √† classifier. √âcrire 100 fois `if/else` ?
:::

::: {.fragment}
Les **boucles** permettent de r√©p√©ter automatiquement des op√©rations.
:::

## Exercice 4 : Boucle for simple {.smaller}

Demandez √† votre LLM d'expliquer la boucle `for` en R avec un exemple.

**Testez ce code :**

```{r}
#| eval: false
for (i in 1:5) {
  print(i)
}
```

**Questions :**

1. Que fait `1:5` ?
2. Que repr√©sente `i` ?
3. Comment afficher les nombres de 10 √† 20 ?

::: {.notes}
10 minutes. Concept fondamental mais peut √™tre abstrait pour certains.
:::

## Exercice 5 : Boucle sur un vecteur {.smaller}

Reprenez vos notes de l'exercice 3 :

```{r}
#| eval: false
notes <- c(8, 12, 15, 9, 18)
```

Utilisez une boucle `for` pour :

1. Afficher chaque note
2. Afficher chaque note avec son classement (R√©ussite/√âchec)

::: {.fragment}
**Astuce :** Combinez `for` et `if/else` !
:::

::: {.notes}
15 minutes. Les √©tudiants vont combiner les deux concepts. Anticiper les confusions entre i (indice) et notes[i] (valeur).
:::

## Exercice 6 : Accumuler des r√©sultats {.smaller}

**Nouveau d√©fi :** Calculez la somme des notes **sans utiliser** `sum()`.

**Indices :**

1. Cr√©ez une variable `total <- 0`
2. Utilisez une boucle pour ajouter chaque note √† `total`
3. Affichez le r√©sultat final

::: {.fragment}
**V√©rification :** Comparez avec `sum(notes)`
:::

::: {.notes}
10 minutes. Introduit le concept d'accumulation. Utile pour comprendre ce que font r√©ellement les fonctions int√©gr√©es.
:::

## Boucle while (optionnel) {.smaller}

Demandez √† votre LLM la diff√©rence entre `for` et `while`.

**Exemple √† tester :**

```{r}
#| eval: false
compteur <- 1
while (compteur <= 5) {
  print(compteur)
  compteur <- compteur + 1
}
```

::: {.callout-warning}
## Attention !
Que se passe-t-il si vous oubliez `compteur <- compteur + 1` ?
:::

::: {.notes}
Optionnel car `while` est moins utilis√© en R. Mais bon pour comprendre les concepts de programmation. Attention aux boucles infinies !
:::

# Cr√©er ses fonctions {background-color="#8B008B"}

## Pourquoi cr√©er des fonctions ?

Jusqu'ici, vous avez **utilis√©** des fonctions : `mean()`, `sum()`, `print()`...

::: {.fragment}
Maintenant, vous allez **cr√©er** vos propres fonctions !
:::

::: {.fragment}
::: {.callout-tip}
## Avantages
- R√©utiliser du code
- √âviter la r√©p√©tition
- Rendre le code plus lisible
- Partager avec d'autres
:::
:::

## Exercice 7 : Premi√®re fonction {.smaller}

Demandez √† votre LLM d'expliquer comment cr√©er une fonction en R.

**Cr√©ez une fonction simple :**

```{r}
#| eval: false
dire_bonjour <- function(nom) {
  message <- paste("Bonjour", nom)
  return(message)
}

# Test
dire_bonjour("Alice")
```

**Questions :**

1. √Ä quoi sert `function()` ?
2. Qu'est-ce qu'un **param√®tre** / **argument** ?
3. √Ä quoi sert `return()` ?

::: {.notes}
15 minutes. Premi√®re fonction. Bien distinguer d√©finition (function) et appel (dire_bonjour("Alice")).
:::

## Exercice 8 : Fonction avec condition {.smaller}

Cr√©ez une fonction `classifier_note()` qui :

- Prend une note en param√®tre
- Retourne "Excellent" si >= 16
- Retourne "R√©ussite" si >= 10
- Retourne "√âchec" sinon

**Testez avec plusieurs valeurs.**

::: {.fragment}
**Extension :** Que se passe-t-il si on passe une note n√©gative ou > 20 ? Comment am√©liorer la fonction ?
:::

::: {.notes}
15 minutes. Premi√®re fonction "utile". L'extension introduit la validation des param√®tres (concept important).
:::

## Exercice 9 : Fonction avec boucle {.smaller}

Cr√©ez une fonction `calculer_moyenne()` qui :

- Prend un vecteur de nombres
- Utilise une boucle pour calculer la moyenne
- Retourne le r√©sultat

**Testez :**

```{r}
#| eval: false
mes_notes <- c(12, 15, 8, 14)
calculer_moyenne(mes_notes)
```

::: {.fragment}
**Questions :**

1. Comment g√©rer les valeurs manquantes (`NA`) ?
2. Comparez votre r√©sultat avec `mean()`
:::

::: {.notes}
15 minutes. Fonction plus complexe. Les √©tudiants r√©utilisent l'exercice 6. Discussion sur NA importante.
:::

## Exercice 10 : Fonction compl√®te {.smaller}

Cr√©ez une fonction `analyser_vecteur()` qui prend un vecteur et retourne :

- Le minimum
- Le maximum
- La moyenne
- Le nombre d'√©l√©ments

::: {.fragment}
**D√©fi :** Comment retourner plusieurs valeurs ? Demandez au LLM !

*Indice : liste ou vecteur nomm√©*
:::

::: {.notes}
15 minutes. Fonction avanc√©e. Introduit le concept de retourner des structures de donn√©es complexes. Les √©tudiants d√©couvriront les listes.
:::

# Mini-projet {background-color="#DC143C"}

## Projet : Analyse de temp√©ratures {.smaller}

Vous allez cr√©er un petit syst√®me d'analyse m√©t√©o.

**Donn√©es :**

```{r}
#| eval: false
temperatures <- c(15, 22, 18, 25, 12, 28, 20, 16, 24, 19)
```

**Cr√©ez les fonctions suivantes :**

1. `classifier_temperature(temp)` : retourne "Froid", "Doux" ou "Chaud"
2. `compter_par_categorie(vecteur_temp)` : compte combien de jours froids/doux/chauds
3. `rapport_meteo(vecteur_temp)` : g√©n√®re un rapport complet (min, max, moyenne, cat√©gories)

::: {.callout-note}
## Utilisez tout ce que vous avez appris
Conditions, boucles, fonctions !
:::

::: {.notes}
45 minutes. Projet synth√®se. Les √©tudiants combinent tous les concepts. Circuler beaucoup. Encourager l'aide entre pairs. Certains iront plus loin (graphiques, etc.).
:::

## Crit√®res du mini-projet {.smaller}

Votre code doit :

::: {.incremental}
- ‚úÖ Fonctionner sans erreur
- ‚úÖ Contenir au moins 3 fonctions
- ‚úÖ Utiliser des conditions (`if/else`)
- ‚úÖ Utiliser au moins une boucle
- ‚úÖ √ätre comment√© (expliquez ce que fait chaque fonction)
:::

::: {.fragment}
**Bonus :**

- G√©rer les cas d'erreur (NA, vecteur vide, etc.)
- Cr√©er des visualisations
- Tester avec d'autres donn√©es
:::

::: {.notes}
Afficher les crit√®res clairement. Certains √©tudiants auront besoin de plus de temps - c'est OK.
:::

# Retour sur l'utilisation des LLMs {background-color="#2F4F4F"}

## Pi√®ges courants avec les LLMs

::: {.callout-warning}
## Attention !
Les LLMs peuvent :

- Proposer du code qui ne fonctionne pas
- Utiliser des fonctions qui n'existent pas
- M√©langer diff√©rentes versions de R
- Donner des explications approximatives
:::

::: {.fragment}
**Votre responsabilit√© :** TOUJOURS tester le code !
:::

## Exercice r√©flexif : Journal de bord {.smaller}

Dans votre journal, documentez :

1. **Un prompt qui a bien fonctionn√©** : Pourquoi ?
2. **Une erreur du LLM** : Comment l'avez-vous d√©tect√©e ? Corrig√©e ?
3. **Votre code le plus complexe** : Expliquez-le avec vos mots
4. **Une chose que vous ne comprenez pas encore** : √Ä approfondir

::: {.fragment}
::: {.callout-tip}
## Conseil
Plus vous serez pr√©cis dans vos prompts, meilleures seront les r√©ponses. Donnez du contexte !
:::
:::

::: {.notes}
10 derni√®res minutes. Moment r√©flexif important. Les √©tudiants prennent du recul sur leur apprentissage.
:::

# Ressources et prochaines √©tapes {background-color="#2E8B57"}

## Pour aller plus loin

::: {.incremental}
- **Documentation R :** `?function`, `?if`, `?for`
- **Pratiquez :** La programmation s'apprend en codant !
- **Debuggez :** Les erreurs sont normales et instructives
- **Partagez :** Discutez de vos solutions avec vos pairs
:::

## Pr√©paration prochaine s√©ance

::: {.callout-note}
## Devoirs
1. Terminez le mini-projet si besoin
2. Mettez √† jour votre journal de bord
3. Cr√©ez au moins une fonction originale qui vous serait utile
:::

::: {.fragment}
**Questions √† explorer :** Comment sauvegarder ses fonctions ? Comment les partager ? (‚Üí scripts, packages)
:::

## Questions ?

::: {.callout-tip}
## N'oubliez pas
- Testez votre code
- Commentez votre code
- Documentez votre apprentissage
- Utilisez les LLMs comme **assistants**, pas comme **r√©dacteurs**
:::

::: {.fragment}
**Bon courage et bon code ! üöÄ**
:::